# mini-mq需求分析









## 功能需求

### 可靠消息传输

保证producer端到broker的同一条消息有且仅有一条被持久化到broker，保证broker到consumer端的同一条消息有且仅有一条被成功消费。

### 可靠消息存储

保证已持久化但还未成功消费的消息不会丢失。

### 流量控制

可以控制producer到broker的流量、broker到consumer的流量、consumer消费消息的流量，避免内存泄漏。

### 全面监控

支持全方位的系统监控，包括JVM监控（jstack、jvm日志、线程使用状况）、接口调用情况（耗时、调用次数、成功失败统计）、当前存储信息（当前存储占用空间，最大存储限制）、多节点存活情况。

### 远程控制

支持总线控制，允许远程连接并使用运维相关命令，包括启动、关闭、重启、导出jvm信息。

### 模块化

项目结构模块化，不同模块支持不同功能，解耦，方便管理。

### 支持集群

支持broker集群模式，支持数据分片、负载均衡。









## 非功能需求

### 高可扩展性

使用SPI机制实现高可扩展性，允许在各个模块进行功能扩展。

1. 持久化存储提供扩展点
2. 对象序列化方式提供扩展点
3. 消息分发到partition的router提供扩展点
4. 同一消费组的消息中心MessageCenter的分发规则提供扩展点

### 高可靠性

集群模式下，支持负载均衡、流量控制。

### 性能需求

单机配置：CPU为4核、内存16G、硬盘7200转、带宽10M、windows 10

单节点下能支持120QPS，多节点下能支持更多的QPS，允许横向扩展。

### 可维护性

分析监控中心信息，对系统进行维护。

### 安全性

在内网中部署，不需要提供额外的安全保护。









## 





## 