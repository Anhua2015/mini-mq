# Mini-mq待办事项





1.  实现Prefetch及其流控（√）



2.  Ack的失败重试机制（√）



3.  消费组ConsumerGroup的实现（√）



4.  补充实现所有handler（包括idGenerator的整合）（√）



5.  客户端本地存储实现（预计使用内存保存已成功记录，并定期发送至broker进行对账，成功后移除记录，避免空间无限制扩大占用，但无法解决客户端宕机下重复消费的情况）（√）



6.  “对账”功能的实现（√）



7.  实现注册中心，支持集群（√）



8.  完成core模块的最后整合和测试（√）



9.  完成client模块的最后整合和测试（√）



10. 整体整合和测试（√）

    1). 消息生产发送和自动批量确认（√）

    2). 消息接收消费和消息确认、拒绝消费（√）

    3). 对账（√）

    4). 流控（√）

    5). 集群（√）



11. 编写示例Demo

    一、生产者能力和消费者能力相同，且较弱

    生产者定时每秒发送一条消息，消费者定时每秒消费并确认一条消息

​		1.1)    对于同一消息主题，单个生产者和单个消费者。

​		1.2)    对于同一消息主题，多个生产者和单个消费者。

​		1.3)    对于同一消息主题，多个生产者和多个消费者（同一消费组）。

​		1.4)    对于同一消费主题，多个生产者和多个消费者（不同消费组）。

​		2.2) 对于多个消费主题，每个消费主题存在两个生产者和两个消费组（每个消费组存在两个消费者）。

​	Demo1：多个生产者(p1,p2,p3)和一个消费者，订阅同一主题。

​	Demo2：多个生产者(p1,p2,p3)和多个消费者(g1-s1,g1-s2,g2-s1)，(g1-s1,g1-s2属于消费组g1，g2-s1属于消费组g2)。

​	Demo3：多个生产者(t1-p1,t1-p2,t2-p1,t2-p2)，(t1-p1,t1-p2订阅消息主题t1，t2-p1,t2-p2订阅消息主题t2)，多个消费者(t1-g1-s1,t1-g1-s2,t2-g2-s1,t2-g2-s2)，(t1-g1-s1,t1-g1-s2订阅同一消费主题t1，且属于同一消费组g1)，(t2-g2-s1,t2-g2-s2订阅同一消费主题t2，且属于同一消费组t2)

 

​	二、生产者能力和消费者能力相同，且较强

​	生产者定时每1秒发送1w条消息，消费者定时每秒消费并确认1w条消息

 

​	三、生产者能力和消费者能力不同，生产者能力较强，消费者能力较弱

​	生产者定时每0.5秒发送1条消息，消费者定时每2秒消费并确认1条消息

 

​	四、生产者能力和消费者能力不同，生产者能力较弱，消费组能力较强

​	生产者定时每2秒发送1条消息，消费者定时每0.5秒消费并确认1条消息

 

12. 进一步完善文档，进一步完善底层原理图



13. 性能测试

    1) 10000->20000->50000->100000->200000->500000->1000000->找到性能瓶颈->定位系统瓶颈->分析优化点

    2) 计算统计不同压力下的系统吞吐量



14. 完成文档终稿